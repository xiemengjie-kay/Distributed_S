<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>Final_Project_GUI API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>Final_Project_GUI</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#Final Project GUI
import tkinter as tk
from tkinter import ttk, filedialog
import ds_messenger as ds
from tkinter.simpledialog import askstring # https://docs.python.org/3/library/dialog.html
import time


class Body(tk.Frame):
    &#34;&#34;&#34;
    The body part of the GUI. Includes a treeview widget displaying the usernames of the user&#39;s friends, a history message widget displaying the messages the user&#39;s friends
    have sent to the user, and a entry widget allowing the user to enter message he/she want to send to his/her friends.
    &#34;&#34;&#34;
    def __init__(self, root, current_user=None):
        &#34;&#34;&#34;
        initializer for Body of the GUI.

        :param current_user: the user who are using the GUI to send and receive messages.
        &#34;&#34;&#34;
        tk.Frame.__init__(self,root)
        self.root = root
        self.current_user = current_user
        self._messages = []
        self._users = []
        self.index = None
        try:
            self.entry = self.current_user.retrieve_all()
        except ds.FailToJoin:
            # Toplevel object which will be treated as a new window 
            closeWindow = tk.Toplevel(self.root)
            closeWindow.title(&#34;Wrong Log In!!&#34;)
            closeWindow.geometry(&#34;300x200&#34;)

            login_frame = tk.Frame(master=closeWindow, bg=&#34;&#34;)
            login_frame.pack(fill=tk.BOTH, side=tk.TOP, expand=True)
        
            editor_frame = tk.Frame(master=login_frame, bg=&#34;red&#34;)
            editor_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=True)
        
        
            login_editor = tk.Text(editor_frame, width=0)
            login_editor.pack(fill=tk.BOTH, side=tk.LEFT, expand=True, padx=0, pady=0)

            login_editor.insert(0.0, &#34;Failed to Log in. The password is incorrect. Please close all the windows and start over.\n&#34;)
        else:
            self._draw()
        

    def node_select(self, event):
        &#34;&#34;&#34;
        Detects which friend has been chosen by the user and will display the message this friend has sent to the user.
        &#34;&#34;&#34;
        self.index = int(self.user_tree.selection()[0])-1
        from_user = self._users[self.index]
        self.set_history_message(self.entry, from_user)


    def set_users(self):
        &#34;&#34;&#34;
        insert the username of the current user&#39;s friend list into the treeview widget in order.
        &#34;&#34;&#34;
        id = 1
        # update the add_user widget.
        for DirectMessage in self.entry:
            # add all senders in to a list
            if DirectMessage[&#39;recipient&#39;] not in self._users:
                self._users.append(DirectMessage[&#39;recipient&#39;])
        # displays all of the DS users that have sent you messages
        for sender in self._users:
            self._insert_user_tree(id, sender)
            id += 1
            

    def insert_user(self, user: str):
        &#34;&#34;&#34;
        Allows the user to add the username of his/her new friend.

        :param user: the username of the friend wanted to be added into the tree widget.
        &#34;&#34;&#34;
        self._users.append(user)
        self._insert_user_tree(len(self._users), user)

    def _insert_user_tree(self, id, username):
        &#39;&#39;&#39;
        insert the username to the user_tree
        &#39;&#39;&#39;
        name = username
        if len(name) &gt; 25:
            name = name[:24] + &#34;...&#34;

        self.user_tree.insert(&#39;&#39;, id, id, text=name)

    def get_text_entry(self):
        &#34;&#34;&#34;
        Returns the text that the user have entered in the bottom of the body frame, which is the message he/she want to send.

        :return str
        &#34;&#34;&#34;
        return self.message_editor.get(&#39;1.0&#39;, &#39;end&#39;).rstrip()

    def set_history_message(self, text:list, from_user:str):
        &#34;&#34;&#34;
        Clears the texts currently displaying on the upper widget of the body frame, and then displays the time and content of the messages of the user selected in the
        treeview on the upper right widget.

        :param text: A nested list including the lists of the time, username, and message that the user have sent.
        :param from_user: The username that the user choose to check for history messages.
        &#34;&#34;&#34;
        self.message_reader.delete(0.0, &#39;end&#39;)
        message_menu = &#34;&#34;
        if text == []:
            self.message_reader.insert(0.0, &#34;No old messages. Start communicating.\n&#34;)
        else:
            for i in text:
                if i[&#39;recipient&#39;] == from_user:
                    # localtime() from https://docs.python.org/3/library/time.html#time.localtime
                    # and https://overiq.com/python-3-time-module/
                    ltime = time.localtime(float(i[&#39;timestamp&#39;]))
                    local_time = str(ltime.tm_mon) + &#39;/&#39; + str(ltime.tm_mday) + &#39;/&#39; + str(ltime.tm_year) + &#39; at &#39;\
                                 + str(ltime.tm_hour) + &#39;:&#39; + str(ltime.tm_min) + &#39;:&#39; + str(ltime.tm_sec)
                    message_menu = message_menu + local_time + &#34;: &#34; + i[&#39;recipient&#39;] + &#34;: &#34; + i[&#39;message&#39;] +&#34;\n&#34;
            if message_menu == &#34;&#34;:
                self.message_reader.insert(0.0, &#34;No old messages. Start communicating.\n&#34;)
            else:
                self.message_reader.insert(0.0, message_menu)
        
        
    def _draw(self):
        &#34;&#34;&#34;
        Draws the userframe, the treeview widget, the message_history widget, and the message_editor widget.
        &#34;&#34;&#34;
        user_frame = tk.Frame(master=self, width=250)
        user_frame.pack(fill=tk.BOTH, side=tk.LEFT)
        
        self.user_tree = ttk.Treeview(user_frame)
        self.user_tree.bind(&#34;&lt;&lt;TreeviewSelect&gt;&gt;&#34;, self.node_select)
        self.user_tree.pack(fill=tk.BOTH, side=tk.TOP, expand=True, padx=5, pady=5)

        # set the add user widget
        self.set_users()
        
        # reading history frame
        history_frame = tk.Frame(master=self, bg=&#34;blue&#34;)
        history_frame.pack(fill=tk.BOTH, side=tk.TOP, expand=True)

        reader_frame = tk.Frame(master=history_frame, bg=&#34;red&#34;)
        reader_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=True)
        
        rscroll_frame = tk.Frame(master=history_frame, bg=&#39;blue&#39;, width=10)
        rscroll_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=False)
        
        self.message_reader = tk.Text(reader_frame, width=0)
        self.message_reader.pack(fill=tk.BOTH, side=tk.LEFT, expand=True, padx=0, pady=0)

        message_reader_scrollbar = tk.Scrollbar(master=rscroll_frame, command=self.message_reader.yview)
        self.message_reader[&#39;yscrollcommand&#39;] = message_reader_scrollbar.set
        message_reader_scrollbar.pack(fill=tk.Y, side=tk.LEFT, expand=False, padx=0, pady=0)

        # writing message frame
        message_frame = tk.Frame(master=self, bg=&#34;&#34;)
        message_frame.pack(fill=tk.BOTH, side=tk.BOTTOM, expand=True)

        editor_frame = tk.Frame(master=message_frame, bg=&#34;red&#34;)
        editor_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=True)
        
        scroll_frame = tk.Frame(master=message_frame, bg=&#39;blue&#39;, width=10)
        scroll_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=False)
        
        self.message_editor = tk.Text(editor_frame, width=0)
        self.message_editor.pack(fill=tk.BOTH, side=tk.LEFT, expand=True, padx=0, pady=0)

        message_editor_scrollbar = tk.Scrollbar(master=scroll_frame, command=self.message_editor.yview)
        self.message_editor[&#39;yscrollcommand&#39;] = message_editor_scrollbar.set
        message_editor_scrollbar.pack(fill=tk.Y, side=tk.LEFT, expand=False, padx=0, pady=0)

        self.root.update()


# Footer
class Footer(tk.Frame):
    &#34;&#34;&#34;
    This creates 2 buttons which allows the user to add his/her friend to the treeview widget and makes him enable to send messages to his friends.
    &#34;&#34;&#34;
    def __init__(self, root, send_callback=None, add_user_callback=None):
        &#34;&#34;&#34;
        Initializes the Footer of the GUI.

        :param send_callback: the callback relates to the send button.
        :param add_user_callback: the callback relates to the add user button.
        &#34;&#34;&#34;
        tk.Frame.__init__(self, root)
        self.root = root
        self._send_callback = send_callback
        self._add_user_callback = add_user_callback

        self._draw()

    def user_click(self):
        &#34;&#34;&#34;
        Reacts when the user clicks on &#39;Add User&#39; button.
        &#34;&#34;&#34;
        if self._add_user_callback is not None:
            self._add_user_callback()

    def send_click(self):
        &#34;&#34;&#34;
        Reacts when the user clicks on &#39;Send&#39; button.
        &#34;&#34;&#34;
        if self._send_callback is not None:
            self._send_callback()


    def _draw(self):
        &#34;&#34;&#34;
        Draws the two button created in the Footer of the GUI.
        &#34;&#34;&#34;
        send_button = tk.Button(master=self, text=&#39;Send&#39;, width=20)
        send_button.configure(command=self.send_click)
        send_button.pack(fill=tk.BOTH, side=tk.RIGHT, padx=5, pady=5)

        user_button = tk.Button(master=self, text=&#39;Add User&#39;, width = 20)
        user_button.configure(command=self.user_click)
        user_button.pack(fill=tk.BOTH, side=tk.LEFT, padx=5, pady=5)

    


class MainApp(tk.Frame):
    &#34;&#34;&#34;
    Calls the body and footer to form a complete GUI.
    &#34;&#34;&#34;
    def __init__(self, root):
        &#34;&#34;&#34;
        Initializes the GUI with asking the username and password of the user.
        &#34;&#34;&#34;
        tk.Frame.__init__(self, root)
        self.root = root
        self.user_lst = []
        # ask username and password
        self.sender()

        # After initialization of the current user is complete, call the _draw method to pack the widgets
        # into the root frame
        self._draw()

    def sender(self):
        &#34;&#34;&#34;
        Asks the username and password of the user and creates a DirectMessenger object.
        &#34;&#34;&#34;
        # askstring() from https://docs.python.org/3/library/dialog.html
        self.username = askstring(&#34;Username&#34;, &#34;Please Enter your username&#34;)
        self.password = askstring(&#34;Password&#34;, &#34;Please Enter your password&#34;)
        # self.messenger is an instance of class DirectMessenger
        self.messenger = ds.DirectMessenger(&#34;168.235.86.101&#34;, self.username, self.password)
            
        
    def send(self):
        &#34;&#34;&#34;
        Connects to the send_callback in Footer and sends messages to selected user in the treeview.
        &#34;&#34;&#34;
        if self.body.index == None:
            self.body.message_reader.delete(0.0, &#39;end&#39;)
            self.body.message_reader.insert(0.0, &#34;No user selected.\n&#34;)
            pass
        else:
            recipient_name = self.body._users[self.body.index]
            message = self.body.get_text_entry()
            result = self.messenger.send(message, recipient_name)
            if result:
                print(&#34;Post sent.&#34;)
                sent_msg = self.username + &#39; sent: &#39; + message +&#39;\n&#39;
                self.body.message_reader.insert(&#39;end&#39;, sent_msg)
            else:
                print(&#34;Post fail to send.&#34;)
                self.body.message_reader.delete(0.0, &#39;end&#39;)
                self.body.message_reader.insert(0.0, &#34;Post fail to send. The password for the current user: {} is incorrect.\n&#34;.format(self.username))
        
    def add_user(self):
        &#34;&#34;&#34;
        Connects to the add_user_callback in Footer and adds the username of the friend the user want to add to the treeview.
        &#34;&#34;&#34;
        new_username = askstring(&#34;Username&#34;, &#34;Please Enter the username&#34;)
        self.body.insert_user(new_username)

        
    def _draw(self):
        &#34;&#34;&#34;
        Draws the body and footer of the GUI.
        &#34;&#34;&#34;
        # The Body and Footer classes must be initialized and packed into the root window.
        self.body = Body(self.root, current_user=self.messenger)
        self.body.pack(fill=tk.BOTH, side = tk.TOP)
        
        self.footer = Footer(self.root, send_callback=self.send, add_user_callback=self.add_user)
        self.footer.pack(fill=tk.BOTH, side=tk.BOTTOM)

if __name__==&#34;__main__&#34;:
    main = tk.Tk()
    
    main.title(&#34;ICS 32 Distributed Social Platform&#34;)
    
    main.option_add(&#39;*tearOff&#39;, False)
    MainApp(main)
    
    main.update()
    main.minsize(720, main.winfo_height())
    main.mainloop()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="Final_Project_GUI.Body"><code class="flex name class">
<span>class <span class="ident">Body</span></span>
<span>(</span><span>root, current_user=None)</span>
</code></dt>
<dd>
<div class="desc"><p>The body part of the GUI. Includes a treeview widget displaying the usernames of the user's friends, a history message widget displaying the messages the user's friends
have sent to the user, and a entry widget allowing the user to enter message he/she want to send to his/her friends.</p>
<p>initializer for Body of the GUI.</p>
<p>:param current_user: the user who are using the GUI to send and receive messages.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Body(tk.Frame):
    &#34;&#34;&#34;
    The body part of the GUI. Includes a treeview widget displaying the usernames of the user&#39;s friends, a history message widget displaying the messages the user&#39;s friends
    have sent to the user, and a entry widget allowing the user to enter message he/she want to send to his/her friends.
    &#34;&#34;&#34;
    def __init__(self, root, current_user=None):
        &#34;&#34;&#34;
        initializer for Body of the GUI.

        :param current_user: the user who are using the GUI to send and receive messages.
        &#34;&#34;&#34;
        tk.Frame.__init__(self,root)
        self.root = root
        self.current_user = current_user
        self._messages = []
        self._users = []
        self.index = None
        try:
            self.entry = self.current_user.retrieve_all()
        except ds.FailToJoin:
            # Toplevel object which will be treated as a new window 
            closeWindow = tk.Toplevel(self.root)
            closeWindow.title(&#34;Wrong Log In!!&#34;)
            closeWindow.geometry(&#34;300x200&#34;)

            login_frame = tk.Frame(master=closeWindow, bg=&#34;&#34;)
            login_frame.pack(fill=tk.BOTH, side=tk.TOP, expand=True)
        
            editor_frame = tk.Frame(master=login_frame, bg=&#34;red&#34;)
            editor_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=True)
        
        
            login_editor = tk.Text(editor_frame, width=0)
            login_editor.pack(fill=tk.BOTH, side=tk.LEFT, expand=True, padx=0, pady=0)

            login_editor.insert(0.0, &#34;Failed to Log in. The password is incorrect. Please close all the windows and start over.\n&#34;)
        else:
            self._draw()
        

    def node_select(self, event):
        &#34;&#34;&#34;
        Detects which friend has been chosen by the user and will display the message this friend has sent to the user.
        &#34;&#34;&#34;
        self.index = int(self.user_tree.selection()[0])-1
        from_user = self._users[self.index]
        self.set_history_message(self.entry, from_user)


    def set_users(self):
        &#34;&#34;&#34;
        insert the username of the current user&#39;s friend list into the treeview widget in order.
        &#34;&#34;&#34;
        id = 1
        # update the add_user widget.
        for DirectMessage in self.entry:
            # add all senders in to a list
            if DirectMessage[&#39;recipient&#39;] not in self._users:
                self._users.append(DirectMessage[&#39;recipient&#39;])
        # displays all of the DS users that have sent you messages
        for sender in self._users:
            self._insert_user_tree(id, sender)
            id += 1
            

    def insert_user(self, user: str):
        &#34;&#34;&#34;
        Allows the user to add the username of his/her new friend.

        :param user: the username of the friend wanted to be added into the tree widget.
        &#34;&#34;&#34;
        self._users.append(user)
        self._insert_user_tree(len(self._users), user)

    def _insert_user_tree(self, id, username):
        &#39;&#39;&#39;
        insert the username to the user_tree
        &#39;&#39;&#39;
        name = username
        if len(name) &gt; 25:
            name = name[:24] + &#34;...&#34;

        self.user_tree.insert(&#39;&#39;, id, id, text=name)

    def get_text_entry(self):
        &#34;&#34;&#34;
        Returns the text that the user have entered in the bottom of the body frame, which is the message he/she want to send.

        :return str
        &#34;&#34;&#34;
        return self.message_editor.get(&#39;1.0&#39;, &#39;end&#39;).rstrip()

    def set_history_message(self, text:list, from_user:str):
        &#34;&#34;&#34;
        Clears the texts currently displaying on the upper widget of the body frame, and then displays the time and content of the messages of the user selected in the
        treeview on the upper right widget.

        :param text: A nested list including the lists of the time, username, and message that the user have sent.
        :param from_user: The username that the user choose to check for history messages.
        &#34;&#34;&#34;
        self.message_reader.delete(0.0, &#39;end&#39;)
        message_menu = &#34;&#34;
        if text == []:
            self.message_reader.insert(0.0, &#34;No old messages. Start communicating.\n&#34;)
        else:
            for i in text:
                if i[&#39;recipient&#39;] == from_user:
                    # localtime() from https://docs.python.org/3/library/time.html#time.localtime
                    # and https://overiq.com/python-3-time-module/
                    ltime = time.localtime(float(i[&#39;timestamp&#39;]))
                    local_time = str(ltime.tm_mon) + &#39;/&#39; + str(ltime.tm_mday) + &#39;/&#39; + str(ltime.tm_year) + &#39; at &#39;\
                                 + str(ltime.tm_hour) + &#39;:&#39; + str(ltime.tm_min) + &#39;:&#39; + str(ltime.tm_sec)
                    message_menu = message_menu + local_time + &#34;: &#34; + i[&#39;recipient&#39;] + &#34;: &#34; + i[&#39;message&#39;] +&#34;\n&#34;
            if message_menu == &#34;&#34;:
                self.message_reader.insert(0.0, &#34;No old messages. Start communicating.\n&#34;)
            else:
                self.message_reader.insert(0.0, message_menu)
        
        
    def _draw(self):
        &#34;&#34;&#34;
        Draws the userframe, the treeview widget, the message_history widget, and the message_editor widget.
        &#34;&#34;&#34;
        user_frame = tk.Frame(master=self, width=250)
        user_frame.pack(fill=tk.BOTH, side=tk.LEFT)
        
        self.user_tree = ttk.Treeview(user_frame)
        self.user_tree.bind(&#34;&lt;&lt;TreeviewSelect&gt;&gt;&#34;, self.node_select)
        self.user_tree.pack(fill=tk.BOTH, side=tk.TOP, expand=True, padx=5, pady=5)

        # set the add user widget
        self.set_users()
        
        # reading history frame
        history_frame = tk.Frame(master=self, bg=&#34;blue&#34;)
        history_frame.pack(fill=tk.BOTH, side=tk.TOP, expand=True)

        reader_frame = tk.Frame(master=history_frame, bg=&#34;red&#34;)
        reader_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=True)
        
        rscroll_frame = tk.Frame(master=history_frame, bg=&#39;blue&#39;, width=10)
        rscroll_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=False)
        
        self.message_reader = tk.Text(reader_frame, width=0)
        self.message_reader.pack(fill=tk.BOTH, side=tk.LEFT, expand=True, padx=0, pady=0)

        message_reader_scrollbar = tk.Scrollbar(master=rscroll_frame, command=self.message_reader.yview)
        self.message_reader[&#39;yscrollcommand&#39;] = message_reader_scrollbar.set
        message_reader_scrollbar.pack(fill=tk.Y, side=tk.LEFT, expand=False, padx=0, pady=0)

        # writing message frame
        message_frame = tk.Frame(master=self, bg=&#34;&#34;)
        message_frame.pack(fill=tk.BOTH, side=tk.BOTTOM, expand=True)

        editor_frame = tk.Frame(master=message_frame, bg=&#34;red&#34;)
        editor_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=True)
        
        scroll_frame = tk.Frame(master=message_frame, bg=&#39;blue&#39;, width=10)
        scroll_frame.pack(fill=tk.BOTH, side=tk.LEFT, expand=False)
        
        self.message_editor = tk.Text(editor_frame, width=0)
        self.message_editor.pack(fill=tk.BOTH, side=tk.LEFT, expand=True, padx=0, pady=0)

        message_editor_scrollbar = tk.Scrollbar(master=scroll_frame, command=self.message_editor.yview)
        self.message_editor[&#39;yscrollcommand&#39;] = message_editor_scrollbar.set
        message_editor_scrollbar.pack(fill=tk.Y, side=tk.LEFT, expand=False, padx=0, pady=0)

        self.root.update()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>tkinter.Frame</li>
<li>tkinter.Widget</li>
<li>tkinter.BaseWidget</li>
<li>tkinter.Misc</li>
<li>tkinter.Pack</li>
<li>tkinter.Place</li>
<li>tkinter.Grid</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="Final_Project_GUI.Body.get_text_entry"><code class="name flex">
<span>def <span class="ident">get_text_entry</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the text that the user have entered in the bottom of the body frame, which is the message he/she want to send.</p>
<p>:return str</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_text_entry(self):
    &#34;&#34;&#34;
    Returns the text that the user have entered in the bottom of the body frame, which is the message he/she want to send.

    :return str
    &#34;&#34;&#34;
    return self.message_editor.get(&#39;1.0&#39;, &#39;end&#39;).rstrip()</code></pre>
</details>
</dd>
<dt id="Final_Project_GUI.Body.insert_user"><code class="name flex">
<span>def <span class="ident">insert_user</span></span>(<span>self, user: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Allows the user to add the username of his/her new friend.</p>
<p>:param user: the username of the friend wanted to be added into the tree widget.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def insert_user(self, user: str):
    &#34;&#34;&#34;
    Allows the user to add the username of his/her new friend.

    :param user: the username of the friend wanted to be added into the tree widget.
    &#34;&#34;&#34;
    self._users.append(user)
    self._insert_user_tree(len(self._users), user)</code></pre>
</details>
</dd>
<dt id="Final_Project_GUI.Body.node_select"><code class="name flex">
<span>def <span class="ident">node_select</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"><p>Detects which friend has been chosen by the user and will display the message this friend has sent to the user.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def node_select(self, event):
    &#34;&#34;&#34;
    Detects which friend has been chosen by the user and will display the message this friend has sent to the user.
    &#34;&#34;&#34;
    self.index = int(self.user_tree.selection()[0])-1
    from_user = self._users[self.index]
    self.set_history_message(self.entry, from_user)</code></pre>
</details>
</dd>
<dt id="Final_Project_GUI.Body.set_history_message"><code class="name flex">
<span>def <span class="ident">set_history_message</span></span>(<span>self, text: list, from_user: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Clears the texts currently displaying on the upper widget of the body frame, and then displays the time and content of the messages of the user selected in the
treeview on the upper right widget.</p>
<p>:param text: A nested list including the lists of the time, username, and message that the user have sent.
:param from_user: The username that the user choose to check for history messages.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_history_message(self, text:list, from_user:str):
    &#34;&#34;&#34;
    Clears the texts currently displaying on the upper widget of the body frame, and then displays the time and content of the messages of the user selected in the
    treeview on the upper right widget.

    :param text: A nested list including the lists of the time, username, and message that the user have sent.
    :param from_user: The username that the user choose to check for history messages.
    &#34;&#34;&#34;
    self.message_reader.delete(0.0, &#39;end&#39;)
    message_menu = &#34;&#34;
    if text == []:
        self.message_reader.insert(0.0, &#34;No old messages. Start communicating.\n&#34;)
    else:
        for i in text:
            if i[&#39;recipient&#39;] == from_user:
                # localtime() from https://docs.python.org/3/library/time.html#time.localtime
                # and https://overiq.com/python-3-time-module/
                ltime = time.localtime(float(i[&#39;timestamp&#39;]))
                local_time = str(ltime.tm_mon) + &#39;/&#39; + str(ltime.tm_mday) + &#39;/&#39; + str(ltime.tm_year) + &#39; at &#39;\
                             + str(ltime.tm_hour) + &#39;:&#39; + str(ltime.tm_min) + &#39;:&#39; + str(ltime.tm_sec)
                message_menu = message_menu + local_time + &#34;: &#34; + i[&#39;recipient&#39;] + &#34;: &#34; + i[&#39;message&#39;] +&#34;\n&#34;
        if message_menu == &#34;&#34;:
            self.message_reader.insert(0.0, &#34;No old messages. Start communicating.\n&#34;)
        else:
            self.message_reader.insert(0.0, message_menu)</code></pre>
</details>
</dd>
<dt id="Final_Project_GUI.Body.set_users"><code class="name flex">
<span>def <span class="ident">set_users</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>insert the username of the current user's friend list into the treeview widget in order.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_users(self):
    &#34;&#34;&#34;
    insert the username of the current user&#39;s friend list into the treeview widget in order.
    &#34;&#34;&#34;
    id = 1
    # update the add_user widget.
    for DirectMessage in self.entry:
        # add all senders in to a list
        if DirectMessage[&#39;recipient&#39;] not in self._users:
            self._users.append(DirectMessage[&#39;recipient&#39;])
    # displays all of the DS users that have sent you messages
    for sender in self._users:
        self._insert_user_tree(id, sender)
        id += 1</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="Final_Project_GUI.Footer"><code class="flex name class">
<span>class <span class="ident">Footer</span></span>
<span>(</span><span>root, send_callback=None, add_user_callback=None)</span>
</code></dt>
<dd>
<div class="desc"><p>This creates 2 buttons which allows the user to add his/her friend to the treeview widget and makes him enable to send messages to his friends.</p>
<p>Initializes the Footer of the GUI.</p>
<p>:param send_callback: the callback relates to the send button.
:param add_user_callback: the callback relates to the add user button.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Footer(tk.Frame):
    &#34;&#34;&#34;
    This creates 2 buttons which allows the user to add his/her friend to the treeview widget and makes him enable to send messages to his friends.
    &#34;&#34;&#34;
    def __init__(self, root, send_callback=None, add_user_callback=None):
        &#34;&#34;&#34;
        Initializes the Footer of the GUI.

        :param send_callback: the callback relates to the send button.
        :param add_user_callback: the callback relates to the add user button.
        &#34;&#34;&#34;
        tk.Frame.__init__(self, root)
        self.root = root
        self._send_callback = send_callback
        self._add_user_callback = add_user_callback

        self._draw()

    def user_click(self):
        &#34;&#34;&#34;
        Reacts when the user clicks on &#39;Add User&#39; button.
        &#34;&#34;&#34;
        if self._add_user_callback is not None:
            self._add_user_callback()

    def send_click(self):
        &#34;&#34;&#34;
        Reacts when the user clicks on &#39;Send&#39; button.
        &#34;&#34;&#34;
        if self._send_callback is not None:
            self._send_callback()


    def _draw(self):
        &#34;&#34;&#34;
        Draws the two button created in the Footer of the GUI.
        &#34;&#34;&#34;
        send_button = tk.Button(master=self, text=&#39;Send&#39;, width=20)
        send_button.configure(command=self.send_click)
        send_button.pack(fill=tk.BOTH, side=tk.RIGHT, padx=5, pady=5)

        user_button = tk.Button(master=self, text=&#39;Add User&#39;, width = 20)
        user_button.configure(command=self.user_click)
        user_button.pack(fill=tk.BOTH, side=tk.LEFT, padx=5, pady=5)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>tkinter.Frame</li>
<li>tkinter.Widget</li>
<li>tkinter.BaseWidget</li>
<li>tkinter.Misc</li>
<li>tkinter.Pack</li>
<li>tkinter.Place</li>
<li>tkinter.Grid</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="Final_Project_GUI.Footer.send_click"><code class="name flex">
<span>def <span class="ident">send_click</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Reacts when the user clicks on 'Send' button.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def send_click(self):
    &#34;&#34;&#34;
    Reacts when the user clicks on &#39;Send&#39; button.
    &#34;&#34;&#34;
    if self._send_callback is not None:
        self._send_callback()</code></pre>
</details>
</dd>
<dt id="Final_Project_GUI.Footer.user_click"><code class="name flex">
<span>def <span class="ident">user_click</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Reacts when the user clicks on 'Add User' button.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def user_click(self):
    &#34;&#34;&#34;
    Reacts when the user clicks on &#39;Add User&#39; button.
    &#34;&#34;&#34;
    if self._add_user_callback is not None:
        self._add_user_callback()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="Final_Project_GUI.MainApp"><code class="flex name class">
<span>class <span class="ident">MainApp</span></span>
<span>(</span><span>root)</span>
</code></dt>
<dd>
<div class="desc"><p>Calls the body and footer to form a complete GUI.</p>
<p>Initializes the GUI with asking the username and password of the user.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MainApp(tk.Frame):
    &#34;&#34;&#34;
    Calls the body and footer to form a complete GUI.
    &#34;&#34;&#34;
    def __init__(self, root):
        &#34;&#34;&#34;
        Initializes the GUI with asking the username and password of the user.
        &#34;&#34;&#34;
        tk.Frame.__init__(self, root)
        self.root = root
        self.user_lst = []
        # ask username and password
        self.sender()

        # After initialization of the current user is complete, call the _draw method to pack the widgets
        # into the root frame
        self._draw()

    def sender(self):
        &#34;&#34;&#34;
        Asks the username and password of the user and creates a DirectMessenger object.
        &#34;&#34;&#34;
        # askstring() from https://docs.python.org/3/library/dialog.html
        self.username = askstring(&#34;Username&#34;, &#34;Please Enter your username&#34;)
        self.password = askstring(&#34;Password&#34;, &#34;Please Enter your password&#34;)
        # self.messenger is an instance of class DirectMessenger
        self.messenger = ds.DirectMessenger(&#34;168.235.86.101&#34;, self.username, self.password)
            
        
    def send(self):
        &#34;&#34;&#34;
        Connects to the send_callback in Footer and sends messages to selected user in the treeview.
        &#34;&#34;&#34;
        if self.body.index == None:
            self.body.message_reader.delete(0.0, &#39;end&#39;)
            self.body.message_reader.insert(0.0, &#34;No user selected.\n&#34;)
            pass
        else:
            recipient_name = self.body._users[self.body.index]
            message = self.body.get_text_entry()
            result = self.messenger.send(message, recipient_name)
            if result:
                print(&#34;Post sent.&#34;)
                sent_msg = self.username + &#39; sent: &#39; + message +&#39;\n&#39;
                self.body.message_reader.insert(&#39;end&#39;, sent_msg)
            else:
                print(&#34;Post fail to send.&#34;)
                self.body.message_reader.delete(0.0, &#39;end&#39;)
                self.body.message_reader.insert(0.0, &#34;Post fail to send. The password for the current user: {} is incorrect.\n&#34;.format(self.username))
        
    def add_user(self):
        &#34;&#34;&#34;
        Connects to the add_user_callback in Footer and adds the username of the friend the user want to add to the treeview.
        &#34;&#34;&#34;
        new_username = askstring(&#34;Username&#34;, &#34;Please Enter the username&#34;)
        self.body.insert_user(new_username)

        
    def _draw(self):
        &#34;&#34;&#34;
        Draws the body and footer of the GUI.
        &#34;&#34;&#34;
        # The Body and Footer classes must be initialized and packed into the root window.
        self.body = Body(self.root, current_user=self.messenger)
        self.body.pack(fill=tk.BOTH, side = tk.TOP)
        
        self.footer = Footer(self.root, send_callback=self.send, add_user_callback=self.add_user)
        self.footer.pack(fill=tk.BOTH, side=tk.BOTTOM)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>tkinter.Frame</li>
<li>tkinter.Widget</li>
<li>tkinter.BaseWidget</li>
<li>tkinter.Misc</li>
<li>tkinter.Pack</li>
<li>tkinter.Place</li>
<li>tkinter.Grid</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="Final_Project_GUI.MainApp.add_user"><code class="name flex">
<span>def <span class="ident">add_user</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Connects to the add_user_callback in Footer and adds the username of the friend the user want to add to the treeview.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_user(self):
    &#34;&#34;&#34;
    Connects to the add_user_callback in Footer and adds the username of the friend the user want to add to the treeview.
    &#34;&#34;&#34;
    new_username = askstring(&#34;Username&#34;, &#34;Please Enter the username&#34;)
    self.body.insert_user(new_username)</code></pre>
</details>
</dd>
<dt id="Final_Project_GUI.MainApp.send"><code class="name flex">
<span>def <span class="ident">send</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Connects to the send_callback in Footer and sends messages to selected user in the treeview.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def send(self):
    &#34;&#34;&#34;
    Connects to the send_callback in Footer and sends messages to selected user in the treeview.
    &#34;&#34;&#34;
    if self.body.index == None:
        self.body.message_reader.delete(0.0, &#39;end&#39;)
        self.body.message_reader.insert(0.0, &#34;No user selected.\n&#34;)
        pass
    else:
        recipient_name = self.body._users[self.body.index]
        message = self.body.get_text_entry()
        result = self.messenger.send(message, recipient_name)
        if result:
            print(&#34;Post sent.&#34;)
            sent_msg = self.username + &#39; sent: &#39; + message +&#39;\n&#39;
            self.body.message_reader.insert(&#39;end&#39;, sent_msg)
        else:
            print(&#34;Post fail to send.&#34;)
            self.body.message_reader.delete(0.0, &#39;end&#39;)
            self.body.message_reader.insert(0.0, &#34;Post fail to send. The password for the current user: {} is incorrect.\n&#34;.format(self.username))</code></pre>
</details>
</dd>
<dt id="Final_Project_GUI.MainApp.sender"><code class="name flex">
<span>def <span class="ident">sender</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Asks the username and password of the user and creates a DirectMessenger object.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sender(self):
    &#34;&#34;&#34;
    Asks the username and password of the user and creates a DirectMessenger object.
    &#34;&#34;&#34;
    # askstring() from https://docs.python.org/3/library/dialog.html
    self.username = askstring(&#34;Username&#34;, &#34;Please Enter your username&#34;)
    self.password = askstring(&#34;Password&#34;, &#34;Please Enter your password&#34;)
    # self.messenger is an instance of class DirectMessenger
    self.messenger = ds.DirectMessenger(&#34;168.235.86.101&#34;, self.username, self.password)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="Final_Project_GUI.Body" href="#Final_Project_GUI.Body">Body</a></code></h4>
<ul class="">
<li><code><a title="Final_Project_GUI.Body.get_text_entry" href="#Final_Project_GUI.Body.get_text_entry">get_text_entry</a></code></li>
<li><code><a title="Final_Project_GUI.Body.insert_user" href="#Final_Project_GUI.Body.insert_user">insert_user</a></code></li>
<li><code><a title="Final_Project_GUI.Body.node_select" href="#Final_Project_GUI.Body.node_select">node_select</a></code></li>
<li><code><a title="Final_Project_GUI.Body.set_history_message" href="#Final_Project_GUI.Body.set_history_message">set_history_message</a></code></li>
<li><code><a title="Final_Project_GUI.Body.set_users" href="#Final_Project_GUI.Body.set_users">set_users</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="Final_Project_GUI.Footer" href="#Final_Project_GUI.Footer">Footer</a></code></h4>
<ul class="">
<li><code><a title="Final_Project_GUI.Footer.send_click" href="#Final_Project_GUI.Footer.send_click">send_click</a></code></li>
<li><code><a title="Final_Project_GUI.Footer.user_click" href="#Final_Project_GUI.Footer.user_click">user_click</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="Final_Project_GUI.MainApp" href="#Final_Project_GUI.MainApp">MainApp</a></code></h4>
<ul class="">
<li><code><a title="Final_Project_GUI.MainApp.add_user" href="#Final_Project_GUI.MainApp.add_user">add_user</a></code></li>
<li><code><a title="Final_Project_GUI.MainApp.send" href="#Final_Project_GUI.MainApp.send">send</a></code></li>
<li><code><a title="Final_Project_GUI.MainApp.sender" href="#Final_Project_GUI.MainApp.sender">sender</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>